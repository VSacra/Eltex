touch practice2_{eltex-pg2-v17}_part1.log
eltex-pg2-v17@eltex-2025-autumn-17:07ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/eltex-pg2-v17/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/eltex-pg2-v17/.ssh/id_rsa
Your public key has been saved in /home/eltex-pg2-v17/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:66GKrAVJ+Uc4NYXdDiH/lOL5DQZNU5i0R4HwjnFItFc eltex-pg2-v17@eltex-2025-autumn
The key's randomart image is:
+---[RSA 3072]----+
|     +=*=+=E.    |
|  . o.=o*=*      |
| o o . BoO .     |
|... o . %..      |
|o  . . +S=       |
| .  .   o.o      |
|  .     o. .     |
| o .   o .       |
|..o ... .        |
+----[SHA256]-----+
eltex-pg2-v17@eltex-2025-autumn:~$ ssh-copy-id root@172.16.9.217
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/eltex-pg2-v17/.ssh/id_rsa.pub"
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
root@172.16.9.217's password:

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'root@172.16.9.217'"
and check to make sure that only the key(s) you wanted were added.

eltex-pg2-v17@eltex-2025-autumn:~$ ssh 'root@172.16.9.217'
eltex-pg2-v17@eltex-2025-autumn:~$ cat ~/.ssh/*.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDknWYmfEhRCl+4LOjW2Du3Z4Ncc8X0tnPYQ/AI86+ArvQ+7tsGE+JkpqPog/HZXN11KgJSa9/HW79MNNRbv6eRgMJGhxesXxMgvf8uPP2TvJ/d3OIeIfkRokZzpA2IH0l9Tk+R6YnONkjwGQGvOGi7igwD/qhLy5DsCU+tabtSO+78Ophvi7NJ9uw8ks8Ef5CHbY3tAUx3C97mznSyAHuVunOBNZoa9yfSNgZw7Ghc7qbwq/WdhQ0GFW+sqeEhHDR/cCoq4cPJltrRV4kE3Dyi2HPXsJs+ZG3ctLK0JmZQj2titzwi3qVfjn90zIKTvMLhdZOTKTLDpQ9z99OHiVCkaPV+P+Fgu5uKlUneK6L48S7KlibvcoHO55wZ819YnxwE3zU9dlGb65+qBetziis5Vl5cX+mhi/5lYH+IbF/5yJ4tEsAu1zaD8VISOzK7UsYOL0Qc5t52hHEmpQUlqK8eUYpTIJWFLOpHytpKsfHaKEqPd3mv+8KExmXclk78hik= eltex-pg2-v17@eltex-2025-autumn
root@eltex-practice2-pg2-v17:~# cat ~/.ssh/authorized_keys
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDknWYmfEhRCl+4LOjW2Du3Z4Ncc8X0tnPYQ/AI86+ArvQ+7tsGE+JkpqPog/HZXN11KgJSa9/HW79MNNRbv6eRgMJGhxesXxMgvf8uPP2TvJ/d3OIeIfkRokZzpA2IH0l9Tk+R6YnONkjwGQGvOGi7igwD/qhLy5DsCU+tabtSO+78Ophvi7NJ9uw8ks8Ef5CHbY3tAUx3C97mznSyAHuVunOBNZoa9yfSNgZw7Ghc7qbwq/WdhQ0GFW+sqeEhHDR/cCoq4cPJltrRV4kE3Dyi2HPXsJs+ZG3ctLK0JmZQj2titzwi3qVfjn90zIKTvMLhdZOTKTLDpQ9z99OHiVCkaPV+P+Fgu5uKlUneK6L48S7KlibvcoHO55wZ819YnxwE3zU9dlGb65+qBetziis5Vl5cX+mhi/5lYH+IbF/5yJ4tEsAu1zaD8VISOzK7UsYOL0Qc5t52hHEmpQUlqK8eUYpTIJWFLOpHytpKsfHaKEqPd3mv+8KExmXclk78hik= eltex-pg2-v17@eltex-2025-autumn
root@eltex-practice2-pg2-v17:~# useradd -m -s /bin/bash user1
root@eltex-practice2-pg2-v17:~# passwd user1
New password:
Retype new password:
passwd: password updated successfully
root@eltex-practice2-pg2-v17:~# useradd user2
root@eltex-practice2-pg2-v17:~# useradd user3
root@eltex-practice2-pg2-v17:~# usermod user3 -s /usr/sbin/nologin
root@eltex-practice2-pg2-v17:~# su user3
This account is currently not available.
root@eltex-practice2-pg2-v17:~# su -s /bin/bash user3
user3@eltex-practice2-pg2-v17:/root$
user3@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~#
root@eltex-practice2-pg2-v17:~# groupadd dopgp
root@eltex-practice2-pg2-v17:~# usermod -aG dopgp user1
root@eltex-practice2-pg2-v17:~# usermod -aG dopgp user2
root@eltex-practice2-pg2-v17:~# usermod -aG dopgp user3
root@eltex-practice2-pg2-v17:~# mkdir /opt/share
root@eltex-practice2-pg2-v17:~# chown :dopgp /opt/share
root@eltex-practice2-pg2-v17:~# ls -l /opt
total 4
drwxr-xr-x 2 root dopgp 4096 Oct 21 11:16 share
root@eltex-practice2-pg2-v17:~# chmod g+w /opt/share
root@eltex-practice2-pg2-v17:~# nano /home/user1/.bashrc
umask 0026
root@eltex-practice2-pg2-v17:~# umask
0022
root@eltex-practice2-pg2-v17:~# su user1
user1@eltex-practice2-pg2-v17:/root$ umask
0026
user1@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# su user1
user1@eltex-practice2-pg2-v17:/root$ touch /opt/share/u1.txt
user1@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# su user2
$ touch /opt/share/u2.txt
$ exit
root@eltex-practice2-pg2-v17:~# su -s /bin/bash  user3
user3@eltex-practice2-pg2-v17:/root$ touch /opt/share/u3.txt
user3@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# su user2
$ rm /opt/share/u1.txt
rm: remove write-protected regular empty file '/opt/share/u1.txt'? Y
$ exit
root@eltex-practice2-pg2-v17:~# su user1
user1@eltex-practice2-pg2-v17:/root$ ls /opt/share
u2.txt  u3.txt
user1@eltex-practice2-pg2-v17:/root$ rm /opt/share/u2.txt
rm: remove write-protected regular empty file '/opt/share/u2.txt'? Y
user1@eltex-practice2-pg2-v17:/root$ rm /opt/share/u3.txt
rm: remove write-protected regular empty file '/opt/share/u3.txt'? Y
user1@eltex-practice2-pg2-v17:/root$ ls /opt/share
user1@eltex-practice2-pg2-v17:/root$
user1@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# chmod +t /opt/share
root@eltex-practice2-pg2-v17:~# su user1
user1@eltex-practice2-pg2-v17:/root$ touch /opt/share/u1.txt
user1@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# su user2
$ touch /opt/share/u2.txt
$ exit
root@eltex-practice2-pg2-v17:~# su -s /bin/bash  user3
user3@eltex-practice2-pg2-v17:/root$ touch /opt/share/u3.txt
user3@eltex-practice2-pg2-v17:/root$ rm /opt/share/u2.txt
rm: remove write-protected regular empty file '/opt/share/u2.txt'? Y
rm: cannot remove '/opt/share/u2.txt': Operation not permitted
user3@eltex-practice2-pg2-v17:/root$ rm /opt/share/u1.txt
rm: remove write-protected regular empty file '/opt/share/u1.txt'? Y
rm: cannot remove '/opt/share/u1.txt': Operation not permitted
user3@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# su user2
$ rm /opt/share/u1.txt
rm: remove write-protected regular empty file '/opt/share/u1.txt'? Y
rm: cannot remove '/opt/share/u1.txt': Operation not permitted
$ rm /opt/share/u3.txt
rm: remove write-protected regular empty file '/opt/share/u3.txt'? Y
rm: cannot remove '/opt/share/u3.txt': Operation not permitted
$ exit
root@eltex-practice2-pg2-v17:~# su user1
user1@eltex-practice2-pg2-v17:/root$ rm /opt/share/u3.txt
rm: remove write-protected regular empty file '/opt/share/u3.txt'? Y
rm: cannot remove '/opt/share/u3.txt': Operation not permitted
user1@eltex-practice2-pg2-v17:/root$ rm /opt/share/u2.txt
rm: remove write-protected regular empty file '/opt/share/u2.txt'? Y
rm: cannot remove '/opt/share/u2.txt': Operation not permitted
user1@eltex-practice2-pg2-v17:/root$ exit
exit
root@eltex-practice2-pg2-v17:~# usermod -aG sudo user1
root@eltex-practice2-pg2-v17:~# nano /opt/share/dmesg
#!/bin/bash
$(which dmesg) "$@"
root@eltex-practice2-pg2-v17:~# chmod u+s /opt/share/dmesg
root@eltex-practice2-pg2-v17:~# su user2
$ /opt/share/dmesg
dmesg: read kernel buffer failed: Operation not permitted
$ exit
root@eltex-practice2-pg2-v17:~# ls -l /opt/share/dmesg
-rwsr-xr-x 1 root root 62 Oct 23 05:50 /opt/share/dmesg
root@eltex-practice2-pg2-v17:~# chage -M 10 user1
root@eltex-practice2-pg2-v17:~# chage -M 10 user2
root@eltex-practice2-pg2-v17:~# chage -M 10 user3
root@eltex-practice2-pg2-v17:~# nano /etc/motd
  GNU nano 7.2                        /etc/motd *
Усова Виктория
root@eltex-practice2-pg2-v17:~# rsync -ar /etc/* /root/etc_backup/
root@eltex-practice2-pg2-v17:~# tar -cf bkup.tar /root/etc_backup/
tar: Removing leading `/' from member names
root@eltex-practice2-pg2-v17:~# tar -cjf bkup.tar.bz2 /root/etc_backup/
tar: Removing leading `/' from member names
root@eltex-practice2-pg2-v17:~# tar -czf bkup.tar.gz /root/etc_backup/
tar: Removing leading `/' from member names
root@eltex-practice2-pg2-v17:~# 7z a bkup.tar.7z /root/bkup.tar
root@eltex-practice2-pg2-v17:~# ls -lh /root/
total 5.0M
-rw-r--r--   1 root root 3.4M Oct 23 07:07 bkup.tar
-rw-r--r--   1 root root 475K Oct 23 07:15 bkup.tar.7z
-rw-r--r--   1 root root 553K Oct 23 07:11 bkup.tar.bz2
-rw-r--r--   1 root root 584K Oct 23 07:11 bkup.tar.gz
drwxr-xr-x 109 root root 4.0K Oct 23 05:57 etc_backup
-rw-r--r--   1 root root 5.5K Oct 15 11:16 practice2_{eltex-pg2-v17}_part1.log
root@eltex-practice2-pg2-v17:~# nano /etc/motd
  GNU nano 7.2                            /etc/motd
Усова Виктория
23.10.2025 14:17
root@eltex-practice2-pg2-v17:~# rsync -ar /etc/ /root/etc_backup/
root@eltex-practice2-pg2-v17:~# cat /root/etc_backup/motd
Усова Виктория
23.10.2025 14:17
root@eltex-practice2-pg2-v17:~# tar -xf bkup.tar.gz
root@eltex-practice2-pg2-v17:~# cp /root/etc_backup/motd /root/bkup.tar.gz
root@eltex-practice2-pg2-v17:~# tar -czf bkup.tar.gz /root/etc_backup/
tar: Removing leading `/' from member names
root@eltex-practice2-pg2-v17:~# ls -lh /root/
total 5.0M
-rw-r--r--   1 root root 3.4M Oct 23 07:07 bkup.tar
-rw-r--r--   1 root root 475K Oct 23 07:15 bkup.tar.7z
-rw-r--r--   1 root root 553K Oct 23 07:11 bkup.tar.bz2
-rw-r--r--   1 root root 585K Oct 23 07:40 bkup.tar.gz
drwxr-xr-x 109 root root 4.0K Oct 23 07:40 etc_backup
-rw-r--r--   1 root root 5.5K Oct 15 11:16 practice2_{eltex-pg2-v17}_part1.log
drwxr-xr-x   3 root root 4.0K Oct 23 07:33 root
root@eltex-practice2-pg2-v17:~# tar -xf bkup.tar.bz2
root@eltex-practice2-pg2-v17:~# diff -rq /root/root/etc_backup /root/etc_backup
Files /root/root/etc_backup/ld.so.cache and /root/etc_backup/ld.so.cache differ
Files /root/root/etc_backup/motd and /root/etc_backup/motd differ
diff: /root/root/etc_backup/mtab: No such file or directory
diff: /root/etc_backup/mtab: No such file or directory
diff: /root/root/etc_backup/os-release: No such file or directory
diff: /root/etc_backup/os-release: No such file or directory
Only in /root/etc_backup: .pwd.lock
diff: /root/root/etc_backup/resolv.conf: No such file or directory
diff: /root/etc_backup/resolv.conf: No such file or directory
Only in /root/etc_backup: .resolv.conf.systemd-resolved.bak
Only in /root/etc_backup: .updated
root@eltex-practice2-pg2-v17:~# mkdir /root/etc_backup_gzip
root@eltex-practice2-pg2-v17:~# mkdir /root/etc_backup_7zip
root@eltex-practice2-pg2-v17:~# tar -xf bkup.tar.gz -C /root/etc_backup_gzip/
root@eltex-practice2-pg2-v17:~# 7z x bkup.tar.7z -o./etc_backup_7zip/

7-Zip 23.01 (x64) : Copyright (c) 1999-2023 Igor Pavlov : 2023-06-20
 64-bit locale=en_US.UTF-8 Threads:2 OPEN_MAX:1024

Scanning the drive for archives:
1 file, 486155 bytes (475 KiB)

Extracting archive: bkup.tar.7z
--
Path = bkup.tar.7z
Type = 7z
Physical Size = 486155
Headers Size = 122
Method = LZMA2:22
Solid = -
Blocks = 1

Everything is Ok

Size:       3471360
Compressed: 486155
root@eltex-practice2-pg2-v17:~# tar -xf /root/etc_backup_7zip/bkup.tar -C /root/etc_backup_7zip/
root@eltex-practice2-pg2-v17:~# diff -rq /root/etc_backup_gzip/root/etc_backup/motd /root/etc_backup_7zip/root/etc_backup/motd
Files /root/etc_backup_gzip/root/etc_backup/motd and /root/etc_backup_7zip/root/etc_backup/motd differ

